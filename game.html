<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Word Game</title>
  <link rel="icon" href="ReadingRoots70x70.png">
  <link rel="apple-touch-icon" href="ReadingRoots70x70.png">
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 18px;
    }

    .dropzone {
      width: 90%;
      min-height: 200px;
      border: 3px dashed #999;
      border-radius: 10px;
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      justify-content: flex-start;
      padding: 10px;
      gap: 10px;
    }

    .dropzone.over {
      border-color: #333;
      background: #f0f0f0;
    }
    .word {
      padding: 20px;
      font-weight: bold;
      cursor: grab;
      -webkit-user-drag: element;
      user-select: none;
      border: 1px solid #000;
    }

    .word:active {
      cursor: grabbing;
    }

    h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    .selectedword {
      border-color: #333;
      background: #9bc4a7;
    }
    .pageHeader {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: darkblue;
      color: white;
      font-weight: bold;
      padding: 5px;
    }
  </style>
</head>
<body>
  <header class="pageHeader">
    <img src="./Reading_Roots.JPG" width="50px" title="Reading Roots">&nbsp;&nbsp; Reading Roots Game
  </header>
  <table>
    <tr>
      <td colspan="2">
        <h2>Available Words</h2>
        <div class="dropzone" id="availablewords">
          <label id="teeth" class="word" draggable="true">teeth</label>
          <label id="these" class="word" draggable="true">these</label>
          <label id="real" class="word" draggable="true">real</label>
          <label id="streets" class="word" draggable="true">streets</label>
          <label id="shield" class="word" draggable="true">shield</label>
          <label id="peanuts" class="word" draggable="true">peanuts</label>
          <label id="between" class="word" draggable="true">between</label>
          <label id="dreaming" class="word" draggable="true">dreaming</label>
          <label id="weekend" class="word" draggable="true">weekend</label>
          <label id="leaf" class="word" draggable="true">leaf</label>
          <label id="wheels" class="word" draggable="true">wheels</label>
          <label id="fields" class="word" draggable="true">fields</label>
          <label id="please" class="word" draggable="true">please</label>
          <label id="keeping" class="word" draggable="true">keeping</label>
          <label id="asleep" class="word" draggable="true">asleep</label>
          <label id="leave" class="word" draggable="true">leave</label>
          <label id="praise" class="word" draggable="true">praise</label>
          <label id="great" class="word" draggable="true">great</label>
          <label id="once" class="word" draggable="true">once</label>
          <label id="want" class="word" draggable="true">want</label>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <h2>ee Words</h2>
        <div class="dropzone" id="ee-dropzone"></div>
      </td>
      <td>
        <h2>ea Words</h2>
        <div class="dropzone" id="ea-dropzone"></div>
      </td>
    </tr>
    <tr>
      <td>
        <h2>e_e Words</h2>
        <div class="dropzone" id="e_e-dropzone"></div>
      </td>
      <td>
        <h2>ie Words</h2>
        <div class="dropzone" id="ie-dropzone"></div>
      </td>
    </tr>
  </table>

  <script>
    //for (let t of ev.touches) {
    //  p.innerText += `Touched Started at ${t.clientX} x ${t.clientY}\n`;
    //}

    const words = document.querySelectorAll("label.word");
    const dropzones = document.querySelectorAll("div.dropzone");

    dropzones.forEach(zone => {
      zone.addEventListener("touchstart", ev => {
        ev.preventDefault();
        let selectedWords = document.querySelectorAll("label.selectedword");

        for (let w of selectedWords) {
          if (w.parentNode != zone) {
            w.classList.remove("selectedword");
            zone.appendChild(w);
          }
        }
      });

      zone.addEventListener("dragover", e => {
        e.preventDefault();
        zone.classList.add("over");
      });

      zone.addEventListener("dragleave", () => {
        zone.classList.remove("over");
      });

      zone.addEventListener("drop", e => {
        e.preventDefault();
        const id = e.dataTransfer.getData("text/plain");
        console.log("drop id: ", id);
        const draggedElement = document.getElementById(id);
        zone.appendChild(draggedElement);
        zone.classList.remove("over");
      });

    });

    words.forEach(word => {
      word.addEventListener("dragstart", ev => {
        // Add the target element's id to the data transfer object
        ev.dataTransfer.setData("text/plain", ev.target.id);
        //console.log(ev.target.innerText);
      });

      word.addEventListener("touchstart", ev => {
        ev.preventDefault();
        for (let t of ev.touches) {
          if (word.classList.contains("selectedword")) {
            word.classList.remove("selectedword");
          } else {
            word.classList.add("selectedword");
          }
        }
      });

    });

  </script>

</body>
</html>
